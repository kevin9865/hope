<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<ui:composition template="/templates/template.xhtml">
	<ui:define name="title">UserQuery</ui:define>
	<ui:define name="body">
	<h:form>
		<p:panel>
			<h:panelGrid columns="5">
				<h:outputLabel value="用户编码:" styleClass="ct-fontsize"></h:outputLabel>
				<p:inputText style="font-size:15px;" value="#{UserAction.userCode}">
					<p:ajax event="keyup" delay="600" update="usersTable" listener="#{UserAction.userFuzzyQuery}" />
				</p:inputText>
			</h:panelGrid>
		</p:panel>
	
		<p:dataTable id="usersTable" var="user" value="#{UserAction.users}" rows="10"
			paginator="true"
			paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			rowsPerPageTemplate="5,10,15" editable="true"
			styleClass="ct-fontsize" widgetVar="userTable" filteredValue="#{UserAction.filteredUsers}">
			<p:ajax event="rowEdit" listener="#{UserAction.onRowEdit}" />
			<p:ajax event="rowEditCancel" listener="#{UserAction.onRowCancel}" />
			<f:facet name="header">
	            <p:outputPanel>
	                <h:outputText value="Search all fields:" />
	                <p:inputText id="userFilter" onkeyup="PF('userTable').filter()" style="width:150px" placeholder="Enter keyword"/>
	            </p:outputPanel>
	        </f:facet>
			<p:column headerText="用户编码" filterMatchMode="contains">
				<h:outputText value="#{user.usercode}" />
			</p:column>
			<p:column headerText="用户ID">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.userId}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.userId}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="用户名">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.username}" styleClass="ct-fontsize" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.username}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="邮箱">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.email}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.email}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column style="width:32px">
				<p:rowEditor />
			</p:column>
		</p:dataTable>
	</h:form>
</ui:define>
</ui:composition>
</html>