<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>userQuery</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<h:outputStylesheet library="css" name="hope.css" />
</h:head>
<h:body>
	<h:form>
		<!-- 		<p:panel>
			<h:panelGrid columns="5">
				<h:outputLabel value="用户编码:" styleClass="ct-fontsize"></h:outputLabel>
				<p:inputText style="font-size:15px;" value="#{userAction.userCode}">
					<p:ajax event="keyup" delay="600" update="usersTable" listener="#{userAction.userFuzzyQuery}" />
				</p:inputText>
			</h:panelGrid>
		</p:panel> -->
		<p:dataTable id="usersTable" var="user" value="#{userAction.users}"
			rows="15" paginator="true"
			paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			editable="true" widgetVar="userTable"
			filteredValue="#{userAction.filteredUsers}"
			style="width:auto;height:auto;" styleClass="ct-fontsize">
			<p:ajax event="rowEdit" listener="#{userAction.onRowEdit}" />
			<p:ajax event="rowEditCancel" listener="#{userAction.onRowCancel}" />
			<f:facet name="header">
				<p:outputPanel style="text-align: right;">
					<p:commandButton value="添加" type="button"
						onclick="PF('dlg1').show();" />
					<h:outputText value="Search all fields:" />
					<p:inputText id="globalFilter" onkeyup="PF('userTable').filter()"
						style="width:150px" placeholder="Enter keyword" />
				</p:outputPanel>
			</f:facet>
			<p:column headerText="用户编码" filterBy="#{user.usercode}">
				<h:outputText value="#{user.usercode}" />
			</p:column>
			<p:column headerText="用户ID" filterBy="#{user.userId}">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.userId}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.userId}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="用户名" filterBy="#{user.username}">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.username}" styleClass="ct-fontsize" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.username}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="邮箱">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.email}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.email}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="电话">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.phone}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.phone}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="角色">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.roleId}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.roleId}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="组织结构">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.orgId}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.orgId}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column headerText="是否启用">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{user.active}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{user.active}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>
			<p:column style="width:32px">
				<p:rowEditor />
			</p:column>
		</p:dataTable>
		<p:dialog id="addUserDialog" header="用户添加" widgetVar="dlg1"
			minHeight="80" styleClass="ct-fontsize">
			<h:panelGrid columns="3" id="addUserPanelGrid">
				<h:outputLabel for="userIdForm" value="用户ID：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:inputText id="userIdForm" value="#{userAction.userIdForm}" required="true"
					requiredMessage="用户ID不能为空" size="19" styleClass="ct-fontsize" />
				<p:message for="userIdForm" />
				<h:outputLabel for="usercodeForm" value="用户编码：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:inputText id="usercodeForm" value="#{userAction.usercodeForm}" required="true"
					requiredMessage="用户编码不能为空" size="19" styleClass="ct-fontsize" />
				<p:message for="usercodeForm" />
				<h:outputLabel for="usernameForm" value="用户名：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:inputText id="usernameForm" value="#{userAction.usernameForm}" required="true"
					requiredMessage="用户名不能为空" size="19" styleClass="ct-fontsize" />
				<p:message for="usernameForm" />
				<h:outputLabel for="passwordForm" value="密  码：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:password id="passwordForm" value="#{userAction.passwordForm}" required="true"
					requiredMessage="密码不能为空" size="19" styleClass="ct-fontsize" />
				<p:message for="passwordForm" />
				<h:outputLabel for="emailForm" value="邮箱：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:inputText id="emailForm" value="#{userAction.emailForm}" required="true"
					requiredMessage="邮箱不能为空" size="19" styleClass="ct-fontsize" />
				<p:message for="emailForm" />
				<h:outputLabel for="phoneForm" value="电话：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:inputText id="phoneForm" value="#{userAction.phoneForm}" required="true"
					requiredMessage="电话不能为空" size="19" styleClass="ct-fontsize" />
				<p:message for="phoneForm" />
				<h:outputLabel for="roleIdForm" value="角色：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:selectOneMenu id="roleIdForm" value="#{userAction.roleIdForm}" styleClass="ct-fontsize">
					<f:selectItem itemLabel="管理员" itemValue="管理员" />
				</p:selectOneMenu>
				<p:message for="roleIdForm" />
				<h:outputLabel for="orgIdForm" value="组织结构：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:selectOneMenu id="orgIdForm" value="#{userAction.orgIdForm}" styleClass="ct-fontsize">
					<f:selectItem itemLabel="研发" itemValue="研发" />
				</p:selectOneMenu>
				<p:message for="orgIdForm" />
				<h:outputLabel for="activeForm" value="是否启用：" style="font-weight:bold"
					styleClass="ct-fontsize" />
				<p:selectOneMenu id="activeForm" value="#{userAction.activeForm}" styleClass="ct-fontsize">
					<f:selectItem itemLabel="是" itemValue="Y" />
					<f:selectItem itemLabel="否" itemValue="N" />
				</p:selectOneMenu>
				<p:message for="activeForm" />
			</h:panelGrid>
			<h:panelGrid columns="2">
				<p:commandButton value="保存" ajax="true" validateClient="true"
					action="#{userAction.addUser}" update="addUserPanelGrid"></p:commandButton>
			</h:panelGrid>
		</p:dialog>
	</h:form>
</h:body>
</html>